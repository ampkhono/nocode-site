# 🎮 ノーコードゲームエディタ

Web上で質問と分岐を作成できるノーコードゲームエディタです。

## 📁 ファイル構成

- `editor.html` - メインのエディタページ
- `editor.js` - エディタの機能を実装するJavaScript

## 🚀 使い方

### 1. エディタを開く

ブラウザで `editor.html` を開いてください。

### 1.5 教材テンプレートを選ぶ

教育者・学生向けに、あらかじめ３種類のテンプレートを用意しています。左サイドバーに「テンプレ読み込み」を追加しておき、クリックだけで初期データを投入できる想定です。

| テンプレート | 目的 | 入力ポイント | プレビュー上で確認できるポイント |
| --- | --- | --- | --- |
| 選択式クイズ | 正解・不正解を即時表示する設問 | ・質問文<br>・選択肢（3〜4個）<br>・正答／解説 | ・背景色／フォント<br>・選択肢ボタンカラー<br>・正答時コメント |
| 復習カード | 暗記カード式でフリップ表示 | ・問題見出し<br>・裏面の答え／補足 | ・カード背景<br>・テキストカラー<br>・タップ時アニメーション |
| 理解度チェック診断 | YES/NO または3択で結果を分岐 | ・質問文<br>・分岐先（結果）<br>・結果コメント／画像 | ・各分岐の接続状態<br>・結果画面の見え方 |

テンプレ通りに入力した後は、各質問や結果を自由にコピー・編集できます。

### 2. クイズ作成の手順

1. **テンプレを選ぶ（任意）**  
   - サイドバーのテンプレートボタンから「選択式クイズ」を読み込むと、設問構成やデザインの初期値が揃います。
2. **質問を追加する**  
   - 「+ 質問を追加」で空の設問を作成し、タイトル／本文／選択肢を入力します。
3. **正誤判定を設定する**  
   - クイズで正解・不正解を出したい場合は「正誤判定を有効にする」にチェックを入れ、選択肢ごとに「正解」フラグをオンにします。
4. **分岐を整える**  
   - 各選択肢の「次のノード」で次の質問や結果を指定します。未設定のままだと次の行に自動遷移します。
5. **プレビューで確認する**  
   - 右側プレビューでUIを確認し、「👁️ プレビュー」から実行画面を開いて正解表示や分岐が意図通りかテストします。
6. **保存／エクスポート**  
   - JSON保存やCSV出力で成果物を手元に残し、必要に応じてHTML生成フローに回します。

### 3. 質問を作成

1. 左サイドバーの「+ 質問を追加」ボタンをクリック
2. 中央のエディタで質問文を入力
3. 選択肢を追加・編集
4. 各選択肢の「次のノードを選択」で分岐先を設定

### 4. 結果を作成

1. 「+ 結果を追加」ボタンをクリック
2. 結果テキスト、画像、URLなどを設定

### 5. プロジェクトの保存・読み込み

- **保存**: 「💾 プロジェクトを読み込み」でJSON形式で保存
- **読み込み**: 「📂 プロジェクトを読み込み」で保存したファイルを読み込み

### 6. エクスポート

- **CSV形式**: 908.pyで使用できるCSVファイルをエクスポート
- **HTML形式**: 準備中（現在はCSVをエクスポート後、908.pyで生成）

## 📊 データ構造

### 質問ノード
```javascript
{
    id: "q_0",
    type: "question",
    title: "質問 1",
    text: "質問文",
    choices: [
        {
            text: "選択肢1",
            value: 0,
            nextId: "q_1" // 次のノードID
        }
    ]
}
```

### 結果ノード
```javascript
{
    id: "r_0",
    type: "result",
    title: "結果 1",
    text: "診断結果",
    image: "attention_type.png",
    url: "https://example.com",
    buttonText: "公式サイトを見る"
}
```

## 🔄 CSV形式との対応

エディタで作成したデータは以下のCSV形式でエクスポートされます：

```
Start,"開始メッセージ"
Selection,"質問1","選択肢1","選択肢2"
Selection,"質問2","選択肢A","選択肢B"
Result,0,"結果1","image.png"
Result_URL,0,"結果2","ボタンテキスト","https://example.com"
End
```

## 🎯 今後の機能拡張予定

- [ ] フローチャート形式の視覚的エディタ
- [ ] ドラッグ&ドロップでのノード配置
- [ ] HTML直接エクスポート機能
- [ ] テーマ・スタイルのカスタマイズ
- [ ] 画像アップロード機能
- [ ] 複数言語対応
- [ ] テンプレート選択ダイアログとサンプル読み込み機能
- [ ] 正答率や学習履歴の簡易集計

## 💡 ヒント

1. **分岐の設定**: 各選択肢の「次のノードを選択」で、その選択肢がどのノードに接続されるかを設定できます
2. **スタートノード**: 最初に作成した質問が自動的にスタートノードになります
3. **プレビュー**: 右サイドバーで選択中のノードのプレビューを確認できます

## 🐛 トラブルシューティング

- **ファイルが読み込めない**: JSON形式のファイルであることを確認してください
- **CSVが正しく出力されない**: 質問と選択肢が正しく入力されているか確認してください
- **プレビューが表示されない**: ブラウザのポップアップブロックを解除してください



